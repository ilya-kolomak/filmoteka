{"mappings":"uNAAA,IAAAA,EAAAC,EAAA,S,aAIMC,EAAuB,UACzBC,EAAkBC,SAASC,cAAc,wBAEvCC,EAAOF,SAASC,cAAc,mBAG9BE,GAFYH,SAASC,cAAc,kBAEjB,IAAI,EAAAL,EAAAQ,UACH,IAAI,EAAAC,EAAAD,SAoD7B,SAASE,EAAiBC,GAGxB,OAAOA,EACJC,KAAI,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAKF,EAALE,MAAOC,EAAcH,EAAdG,eAAgBC,EAAYJ,EAAZI,aAGxC,MAAO,8GAIJC,OADiCJ,EAAY,gBAI1BI,OAHnBH,EAAM,+GAIaG,OADAF,EAAe,sCAEhBE,OADCC,KAAK,sCACOD,OAAbD,EAAa,6B,IAKrCG,KAAK,G,CAxEVd,EAAKe,iBAAiB,UAgBtB,SAAkBC,GAChBA,EAAEC,iBAEFhB,EAAgBiB,MAAQF,EAAEG,cAAcC,SAASF,MAEjDjB,EAAgBoB,cAAcC,MAAK,SAAAf,G,IAAGF,EAAOE,EAAPF,QACpCkB,aAAaC,QAAQ5B,EAAqB6B,KAAKC,UAAU,CAAErB,aAC3DsB,QAAQC,IAAIvB,GACZ,IAAMwB,EAASzB,EAAiBC,GAChCsB,QAAQC,IAAIC,GACZhC,EAAgBiC,mBAAmB,YAAaD,E,OArBlD5B,EAAgB8B,KAAO,EACvB9B,EAAgBoB,cAAcC,MAAK,SAAAf,G,IAAGF,EAAOE,EAAPF,QACpCkB,aAAaC,QAAQ5B,EAAqB6B,KAAKC,UAAU,CAAErB,aAC3DsB,QAAQC,IAAIvB,GACZ,IAAMwB,EAASzB,EAAiBC,GAChCsB,QAAQC,IAAIC,GACZhC,EAAgBiC,mBAAmB,YAAaD,E","sources":["src/js/hero.js"],"sourcesContent":["import ImageApiService from './mdApiService';\nimport GenresApiService from './genresApi';\n\nconst STORAGE_KEY_GENRES = `genres`;\nconst STORAGE_KEY_RESULTS = `results`;\nlet photosContainer = document.querySelector('.js-photos-container');\nlet merged = {};\nconst form = document.querySelector('.js-search-form');\nconst searchBtn = document.querySelector('.js-search-btn');\n\nconst imageApiService = new ImageApiService();\nconst genresApiService = new GenresApiService();\nform.addEventListener('submit', onSearch);\n// const markup = renderMarkupCard(results);\n\nrender();\nfunction render() {\n  imageApiService.page = 1;\n  imageApiService.fetchImages().then(({ results }) => {\n    localStorage.setItem(STORAGE_KEY_RESULTS, JSON.stringify({ results }));\n    console.log(results);\n    const markup = renderMarkupCard(results);\n    console.log(markup);\n    photosContainer.insertAdjacentHTML('beforeend', markup);\n    // return results;\n  });\n}\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  imageApiService.query = e.currentTarget.elements.query;\n\n  imageApiService.fetchImages().then(({ results }) => {\n    localStorage.setItem(STORAGE_KEY_RESULTS, JSON.stringify({ results }));\n    console.log(results);\n    const markup = renderMarkupCard(results);\n    console.log(markup);\n    photosContainer.insertAdjacentHTML('beforeend', markup);\n    // return results;\n  });\n\n  // genresApiService.fetchGenres().then(({ genres }) => {\n  //   localStorage.setItem(STORAGE_KEY_GENRES, JSON.stringify({ genres }));\n  //   // return genres;\n  // });\n  // const markup = renderMarkupCard(merged);\n  // console.log(markup);\n  // // renderMarkupCard();\n}\n\n// function addGenresToResults() {\n//   const savedResults = JSON.parse(localStorage.getItem(STORAGE_KEY_RESULTS));\n//   const savedGenres = JSON.parse(localStorage.getItem(STORAGE_KEY_GENRES));\n//   console.log(savedGenres);\n//   console.log(savedResults);\n\n//   let merged = { ...savedResults, ...savedGenres };\n\n//   console.log(merged);\n//   // return merged;\n// }\n\nfunction renderMarkupCard(results) {\n  // addGenresToResults();\n\n  return results\n    .map(({ poster_path, title, original_title, release_date }) =>\n      // genres: [{ name }],\n      {\n        return ` <li class=\"hero-item\">\n    <div class=\"hero-thumb\">\n    <img\n     src=\"https://image.tmdb.org/t/p/w500/${poster_path}\"\n    alt=\"${title}\" loading=\"lazy\" class=\"img-item\" />\n    </div>\n    <div class=\"hero-info\">\n      <p class=\"film-title\">${original_title}</p>\n       <p class=\"film-info\">${name}|</p>\n      <p class=\"film-info\">${release_date}</p>\n    </div>\n   </li>`;\n      }\n    )\n    .join('');\n}\n\n// function renderMarkupCard(merged) {\n//   // addGenresToResults();\n\n//   return merged\n//     .map(\n//       ({\n//         results: { poster_path, title, original_title, release_date },\n//         genres: { name },\n//       }) => {\n//         return ` <li class=\"hero-item\">\n//     <div class=\"hero-thumb\">\n//     <img\n//      src=\"${poster_path}\"\n//     alt=\"${title}\" loading=\"lazy\" class=\"img-item\" />\n//     </div>\n//     <div class=\"hero-info\">\n//       <p class=\"film-title\">${original_title}</p>\n//       <p class=\"film-info\">${name}|</p>\n//       <p class=\"film-info\">${release_date}</p>\n//     </div>\n//    </li>`;\n//       }\n//     )\n//     .join('');\n\n//   photosContainer.insertAdjacentHTML('beforeend', markup);\n// }\n"],"names":["$2CUkP","parcelRequire","$c519d076f6352209$var$STORAGE_KEY_RESULTS","$c519d076f6352209$var$photosContainer","document","querySelector","$c519d076f6352209$var$form","$c519d076f6352209$var$imageApiService","default","$kQYx6","$c519d076f6352209$var$renderMarkupCard","results","map","param","poster_path","title","original_title","release_date","concat","name","join","addEventListener","e","preventDefault","query","currentTarget","elements","fetchImages","then","localStorage","setItem","JSON","stringify","console","log","markup","insertAdjacentHTML","page"],"version":3,"file":"hero.d6ad889f.js.map"}